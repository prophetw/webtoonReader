{"version":3,"file":"bundle.js","mappings":";;;;;AAAA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,qBAAqB;AACrB,yBAAyB;;AAEzB;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,UAAU;AACV,8BAA8B;AAC9B;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU,QAAQ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,MAAM;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA,UAAU,QAAQ,cAAc,UAAU;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,IAAI;AACJ;AACA;AACA;AACA,UAAU,QAAQ,cAAc,UAAU,GAAG,QAAQ;AACrD;AACA;AACA,yBAAyB,WAAW,IAAI,QAAQ;AAChD,sDAAsD,WAAW,IAAI,QAAQ;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,qBAAqB,QAAQ,EAAE,SAAS;AACxC;AACA;AACA,MAAM;AACN,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,+EAA+E;AAC/E;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,6EAA6E;AAC7E;;AAEA,CAAC;;AAED;AACA;;AAEA;AACA,iCAAiC;AACjC;AACA,2BAA2B;AAC3B;AACA;AACA,+BAA+B;AAC/B;AACA;;AAEA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,IAAI;;;AAGJ;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;AACD;;;AAGA;AACA,2D","sources":["webpack://manhuaServer/./src/index.js"],"sourcesContent":["// const baseUrl = \"http://192.168.1.11:3000\";\n// const hostname = window.location.hostname;\n// const baseUrl = `http://${hostname}:3000`;\nconst baseUrl = \"\";\nconst isMobile =  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\nlet curComicName = 'jmtt';\nlet curComicEpisode = 0;\nlet curEpisodesAry = []\nlet scrollInterval; // 用于存储定时器ID\nlet scrollSpeed = 1; // 滚动速度，每次滚动1像素\nlet isScrolling = false; // 标记是否正在滚动\n\nfunction startAutoScroll(element) {\n    scrollInterval = setInterval(function() {\n        if (element.scrollTop < element.scrollHeight - element.clientHeight) {\n            element.scrollTop += scrollSpeed; // 每次滚动1像素\n\t\t\t\t\t\tisScrolling = true;\n        } else {\n            stopAutoScroll(); // 如果滚动到底部，自动停止\n        }\n    }, 10);\n}\n\nfunction stopAutoScroll() {\n    clearInterval(scrollInterval);\n\t\tisScrolling = false;\n}\n\nfunction fetchComics() {\n\tfetch(`${baseUrl}/api/comics`)\n\t\t\t.then(response => response.json())\n\t\t\t.then(comics => {\n\t\t\t\tconst comicsContainer = document.getElementById('comics');\n\t\t\t\tcomicsContainer.innerHTML = '';\n\t\t\t\tcomics.forEach(comic => {\n\t\t\t\t\t\tconst details = document.createElement('details');\n\t\t\t\t\t\tconst summary = document.createElement('summary');\n\t\t\t\t\t\tsummary.textContent = comic;\n\t\t\t\t\t\tdetails.appendChild(summary);\n\t\t\t\t\t\tconst episodesContainer = document.createElement('div');\n\t\t\t\t\t\tepisodesContainer.id = `episodes-${comic}`;\n\t\t\t\t\t\tdetails.appendChild(episodesContainer);\n\t\t\t\t\t\tcomicsContainer.appendChild(details);\n\t\t\t\t\t\t\n\t\t\t\t\t\tsummary.addEventListener('click', () => {\n\t\t\t\t\t\t\tfetchEpisodes(comic, episodesContainer);\n\t\t\t\t\t\t\tcurComicName = comic;\n\t\t\t\t\t\t\tdocument.getElementById('toggleEpisodesList').click();\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => console.error('Error fetching comics:', error));\n}\n\nfunction fetchEpisodes(comicName, episodesContainer) {\n\tfetch(`${baseUrl}/api/comics/${comicName}`)\n\t\t\t.then(response => response.json())\n\t\t\t.then(episodes => {\n\t\t\t\t\tcurEpisodesAry = episodes;\n\t\t\t\t\tepisodesContainer.innerHTML = '';\n\t\t\t\t\tconst episodesTitle = document.createElement('h2');\n\t\t\t\t\tepisodesTitle.textContent = 'Episodes';\n\t\t\t\t\tconst episodesDom = document.getElementById('episodes');\n\t\t\t\t\tepisodesDom.innerHTML = '';\n\t\t\t\t\tepisodes.forEach((episode, index) => {\n\t\t\t\t\t\t\tconst episodeDiv = document.createElement('div');\n\t\t\t\t\t\t\tepisodeDiv.textContent = episode;\n\t\t\t\t\t\t\tepisodesDom.appendChild(episodeDiv);\n\t\t\t\t\t\t\tepisodeDiv.onclick = () => {\n\t\t\t\t\t\t\t\tfetchImages(comicName, episode);\n\t\t\t\t\t\t\t\tcurComicEpisode = index;\n\t\t\t\t\t\t\t\tdocument.getElementById('toggleEpisodesList').click();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => console.error('Error fetching episodes:', error));\n}\nfunction fetchImages(comicName, episode, imagesContainer) {\n\tfetch(`${baseUrl}/api/comics/${comicName}/${episode}`)\n\t\t\t.then(response => response.json())\n\t\t\t.then(images => {\n\t\t\t\t\tdocument.title = `${comicName} - ${episode}`;\n\t\t\t\t\tdocument.getElementById('header').innerHTML = `${comicName} - ${episode}`;\n\t\t\t\t\timagesContainer = imagesContainer ? imagesContainer : document.getElementById('content');\n\t\t\t\t\timagesContainer.innerHTML = '';\n\t\t\t\t\timages.forEach(imageUrl => {\n\t\t\t\t\t\t\tconst img = document.createElement('img');\n\t\t\t\t\t\t\tif(imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {\n\t\t\t\t\t\t\t\timg.src = imageUrl;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\timg.src = `${baseUrl}${imageUrl}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\timagesContainer.appendChild(img);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => console.error('Error fetching images:', error));\n}\n\nfunction loadNextEpisode() {\n\tcurComicEpisode = (parseInt(curComicEpisode) + 1).toString();\n\tconst episodeName = curEpisodesAry[curComicEpisode];\n\tfetchImages(curComicName, episodeName);\n}\n\nfunction loadPreviousEpisode() {\n\tcurComicEpisode = (parseInt(curComicEpisode) - 1).toString();\n\tconst episodeName = curEpisodesAry[curComicEpisode];\n\tfetchImages(curComicName, episodeName);\n}\n\n\ndocument.getElementById('toggleComicsList').addEventListener('click', () => {\n\tconst comicsPanel = document.getElementById('comics');\n\t// 切换comics面板的显示状态\n\tif (comicsPanel.style.transform === 'translateX(0px)') {\n\t\t\tcomicsPanel.style.transform = 'translateX(-100%)';\n\t} else {\n\t\t\tcomicsPanel.style.transform = 'translateX(0px)';\n\t\t\tdocument.getElementById('episodes').style.transform = 'translateX(-100%)';  // 同时确保episodes面板是隐藏的\n\t}\n});\n\ndocument.getElementById('toggleEpisodesList').addEventListener('click', () => {\n\tconst episodesPanel = document.getElementById('episodes');\n\t// 切换episodes面板的显示状态\n\tif (episodesPanel.style.transform === 'translateX(0px)') {\n\t\t\tepisodesPanel.style.transform = 'translateX(-100%)';\n\t} else {\n\t\t\tepisodesPanel.style.transform = 'translateX(0px)';\n\t\t\tdocument.getElementById('comics').style.transform = 'translateX(-100%)';  // 同时确保comics面板是隐藏的\n\t}\t\n\n});\n\nlet touchStartX = 0;\nlet touchEndX = 0;\n\nfunction handleGesture() {\n    const minSwipeDistance = 50; // 设置最小的滑动距离为50像素，以区分滑动和轻触\n    if (touchEndX + minSwipeDistance < touchStartX) {\n        loadNextEpisode(); // 从右向左滑\n    }\n    if (touchEndX > touchStartX + minSwipeDistance) {\n        loadPreviousEpisode(); // 从左向右滑\n    }\n}\n\n// document.getElementById('content').addEventListener('touchstart', e => {\n//     touchStartX = e.changedTouches[0].screenX;\n// });\n\n// document.getElementById('content').addEventListener('touchend', e => {\n//     touchEndX = e.changedTouches[0].screenX;\n//     handleGesture();\n// });\n\n\nlet action = isMobile ? 'touchstart' : 'click';\n\ndocument.getElementById('next').addEventListener(action, e => {\n\tloadNextEpisode();\n});\ndocument.getElementById('prev').addEventListener(action, e => {\n\tloadPreviousEpisode();\n});\n\ndocument.getElementById('play').addEventListener(action, e => {\n\tif(isScrolling){\n\t\tstopAutoScroll();\n\t} else{\n\t\tstartAutoScroll(document.getElementById('content'));\n\t}\n});\n// 其他已有的函数继续保持不变\n\n\n// 初始化加载漫画列表\ndocument.addEventListener('DOMContentLoaded', fetchComics);"],"names":[],"sourceRoot":""}